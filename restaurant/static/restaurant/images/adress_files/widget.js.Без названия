!function(s,r){"use strict";var t=!1,d=/localhost|192\.168\..*/.test(r.location.hostname);try{t=!0}catch(t){console.error(t)}s.bookbanket||(s.bookbanket={serviceHost:"https://code.bookbanket.ru/"+(t?"dev/":""),boxId:"bookbanket_widget",iframe:null,params:{},search:"",init:function(t){this.boxId=t||this.boxId,this.setParams(t),this.loadPolyfill(),r.addEventListener("touchmove",function(t){-1!==r.className.indexOf("bookbanket_widget__noScroll")&&t.preventDefault()},!1)},addCallback:function(t,e){r.addEventListener("bookbanket_widget:"+t,function(t){return e(t.detail)})},fireCallback:function(t,e){r.dispatchEvent(new CustomEvent("bookbanket_widget:"+t,{detail:e}))},setParams:function(t){var e=this.getCookie("_ga"),o=this.getCookie("_ym_uid");try{var a=s.localStorage.getItem("bookbanket_id_binfo"),n=s.localStorage.getItem("bookbanket_quota"),i=s.localStorage.getItem("bookbanket_quota_age")}catch(t){console.error(t)}a&&(this.params.id_binfo=a),n&&(this.params.quota=n),i&&(this.params.quota_age=i),t&&(this.params.a=t),e&&(this.params.cid=e.replace(/.+\..\.(.+)/g,"$1")),o&&(this.params.ym_uid=o),this.params.ua=s.navigator.userAgent,this.params.domain=r.location.hostname.replace("www.",""),this.params.domain=d?"soglasiehall.bbanket.ru":this.params.domain,this.search="?"+this.serialize(this.params)},check:function(){var e=this,o=new XMLHttpRequest;o.open("GET","https://in.bookbanket.ru/booking/api/"+this.search+"&m=start",!0),o.onloadend=function(){var t;try{t=JSON.parse(o.response)}catch(t){console.error(t)}if(t&&!t.message&&"Widget not activated"!==t.message)return e.fireCallback("activation",t),e.createStyle(),void e.createButton(t);console.error("bookbanket_widget check",o)},o.send(null)},messageListener:function(t){var e;try{e=JSON.parse(t.data)}catch(t){}if(e&&"bookbanket"===e.namespace)switch(e.type){case"close":s.bookbanket.close();break;case"remove":s.bookbanket.remove();break;case"auth":try{s.localStorage.setItem("bookbanket_id_binfo",e.data.id_binfo)}catch(t){console.error(t)}s.bookbanket.fireCallback("registration",e.data);break;case"quota":try{s.localStorage.setItem("bookbanket_quota",e.data.quota),s.localStorage.setItem("bookbanket_quota_age",e.data.age)}catch(t){console.error(t)}break;case"cost_calculation_request":case"form_opening":s.bookbanket.fireCallback(e.type,e.data)}},open:function(){r.documentElement.classList.add("bookbanket_widget__noScroll"),this.params.id_binfo||this.fireCallback("form_opening",!0),this.iframe?this.iframe.classList.remove("bookbanket_widget__iframe--hide"):this.createIframe()},close:function(){r.documentElement.classList.remove("bookbanket_widget__noScroll"),this.iframe&&this.iframe.classList.add("bookbanket_widget__iframe--hide")},remove:function(){this.close(),this.iframe&&r.documentElement.removeChild(this.iframe),s.removeEventListener("message",this.messageListener),this.iframe=null},createStyle:function(){var t=this.serviceHost+"widget/fonts/",e='      @font-face {        font-family: "P22 Underground CY Pro";        font-weight: 300;        font-style: normal;        font-display: swap;        src: url("'+t+'p22_underground_cy_pro_light.woff2") format("woff2"),        url("'+t+'p22_underground_cy_pro_light.woff") format("woff");            }            @font-face {        font-family: "P22 Underground CY Pro";        font-weight: 400;        font-style: normal;        font-display: swap;         src: url("'+t+'p22_underground_cy_pro_book.woff2") format("woff2"),        url("'+t+'p22_underground_cy_pro_book.woff") format("woff");            }            @font-face {        font-family: "P22 Underground CY Pro";        font-weight: 500;        font-style: normal;        font-display: swap;        src: url("'+t+'p22_underground_cy_pro_demi.woff2") format("woff2"),        url("'+t+'p22_underground_cy_pro_demi.woff") format("woff");            }      .is-hidden {      opacity: 0 !important;      }        .bookbanket_widget__button {          position: fixed;          bottom: 0;          right: 0;          width: 412px;          height: 116px;          z-index: 2147483647;          animation-name: bookbanket_widget__button_scale;          animation-duration: 1s;          animation-timing-function: ease-out;          animation-delay: 0s;          animation-direction: alternate;          animation-iteration-count: infinite;          animation-fill-mode: none;          animation-play-state: running;        }        .bookbanket_widget__iframe {          position: fixed;          top: 0;          bottom: 0;          left: 0;          right: 0;          height: 100%;          width: 100%;          border: none;          z-index: 2147483647;          -webkit-overflow-scrolling: touch;        }        iframe.bookbanket_widget__iframe--hide {          height: 0 !important;          overflow: hidden !important;        }        .bookbanket_widget__iframe--loading {          background: url("'+this.serviceHost+'widget_spinner.svg") 50% 50% no-repeat;          background-size: 100px 100px;        }        .bookbanket_widget__noScroll {          height: 100%;          overflow-y: hidden;          touch-action: none;          -webkit-overflow-scrolling: auto !important;        }        .bookbanket_widget__button__text {        position:absolute;        top: 0;        left: 0;        right: 0;        bottom: 0;        z-index: 5;        pointer-events: none;        font-family: "P22 Underground CY Pro", "Arial", "Helvetica", sans-serif;        color: #fff;        padding: 27px 10px 27px 130px;        line-height: 1;        text-rendering: optimizelegibility;        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);        -webkit-text-size-adjust: none;        -webkit-font-smoothing: antialiased;        -moz-tap-highlight-color: rgba(0, 0, 0, 0);        -moz-text-size-adjust: none;        -moz-font-smoothing: antialiased;        -ms-tap-highlight-color: rgba(0, 0, 0, 0);        -ms-text-size-adjust: none;        -ms-font-smoothing: antialiased;        -moz-osx-font-smoothing: grayscale;        }        .bookbanket_widget__button__text__title b,        .bookbanket_widget__button__text__subtitle b{        font-size: 24px;        font-weight: 500;        font-family: "P22 Underground CY Pro", "Arial", "Helvetica", sans-serif;        }        .bookbanket_widget__button__text__title {        font-size: 22px;        margin-bottom: 5px;        margin-top: 3px;        display: block;        font-weight: 300;        font-family: "P22 Underground CY Pro", "Arial", "Helvetica", sans-serif;        }        .bookbanket_widget__button__text__subtitle {        font-weight: 300;        font-size: 22px;        font-family: "P22 Underground CY Pro", "Arial", "Helvetica", sans-serif;        }        @media only screen and (max-width: 767px) {          .bookbanket_widget__button__text {          padding: 18px 10px 18px 83px;          }          .bookbanket_widget__button__text__title b,        .bookbanket_widget__button__text__subtitle b{        font-size: 16px;        font-weight: 500;        }          .bookbanket_widget__button__text__title {          font-size: 16px;          margin-bottom: 3px;          margin-top: 1px;          }          .bookbanket_widget__button__text__subtitle {          font-size: 16px;          margin-top: 4px;          display:block;          }          .bookbanket_widget__button {            width: 268px;            height: 69px;            right: -9px;          }        }        @keyframes bookbanket_widget__button_scale {          0% {            transform: scale(1);          }          100% {            transform: scale(1.05);          }        }      ',o=r.createElement("style");o.appendChild(r.createTextNode(e)),r.head.appendChild(o)},createButton:function(t){var e,o;t.name_up&&(e=t.name_up),t.name_down&&(o=t.name_down),t.name_up||t.name_down||(e="проверить",o="свободные даты");var a=this,n=new XMLHttpRequest,i='<div class="bookbanket_widget__button__text"><span class="bookbanket_widget__button__text__title">'+e+'</span><span class="bookbanket_widget__button__text__subtitle">'+o+"</span></div>";n.open("GET",this.serviceHost+"widget_button.svg",!0),n.onloadend=function(){var t=r.createElement("span");t.className="bookbanket_widget__button",t.innerHTML=n.response+i,t.addEventListener("click",function(){a.open()}),r.addEventListener("keyup",function(t){27===(t.which||t.keyCode||0)&&a.remove()}),r.documentElement.appendChild(t),a.createIframe("hidden"),r.fonts&&(t.classList.add("is-hidden"),"loaded"===r.fonts.status&&setTimeout(function(){t.classList.remove("is-hidden")},1e3),r.fonts.onloadingdone=function(){t.classList.remove("is-hidden")},r.fonts.ready.then(function(){t.classList.remove("is-hidden")}))},n.send(null)},createIframe:function(t){"localhost"===r.location.hostname?r.location.origin:this.serviceHost;var e=r.createElement("iframe");e.name="iframe_"+this.boxId,e.id=e.name,e.className="bookbanket_widget__iframe bookbanket_widget__iframe--loading",e.title="bookbanket widget",e.frameBorder="0",e.allowFullscreen=!0,e.src=this.serviceHost+"widget.html"+this.search,t&&e.classList.add("bookbanket_widget__iframe--hide"),e.addEventListener("load",function(){e.classList.remove("bookbanket_widget__iframe--loading")}),s.addEventListener("message",this.messageListener),this.iframe=e,r.documentElement.appendChild(e)},getCookie:function(t){var e=("; "+r.cookie).split("; "+t+"=");if(2===e.length)return e.pop().split(";").shift()},serialize:function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e.join("&")},loadPolyfill:function(){this.loadCallbacks()},loadCallbacks:function(){var e=this,t=r.createElement("script");t.crossOrigin="anonymous",t.addEventListener("load",function(t){e.check()}),t.src="https://in.bookbanket.ru/callback.php?a="+e.params.a,r.head.appendChild(t)}}),s.wedby||(s.wedby=s.bookbanket)}(window,document);